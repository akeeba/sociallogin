{"version":3,"sources":["../buttons.js"],"names":["akeeba_sociallogin_findField","elForm","fieldSelector","elInputs","querySelectorAll","length","akeeba_sociallogin_lookInParentElementsForField","innerElement","elElement","parentElement","elInput","undefined","nodeName","elForms","i","akeeba_sociallogin_move_button","elSocialLoginButton","possibleSelectors","elLoginBtn","selector","appendChild"],"mappings":";;AAAA;;;;;;AAMA;;;;;;;;AAQA,SAASA,4BAAT,CAAsCC,MAAtC,EAA8CC,aAA9C,EACA;AACI,MAAIC,QAAQ,GAAGF,MAAM,CAACG,gBAAP,CAAwBF,aAAxB,CAAf;;AAEA,MAAI,CAACC,QAAQ,CAACE,MAAd,EACA;AACI,WAAO,IAAP;AACH;;AAED,SAAOF,QAAQ,CAAC,CAAD,CAAf;AACH;AAED;;;;;;;;;;;AASA,SAASG,+CAAT,CAAyDC,YAAzD,EAAuEL,aAAvE,EACA;AACI,MAAIM,SAAS,GAAGD,YAAY,CAACE,aAA7B;AACA,MAAIC,OAAO,GAAK,IAAhB;;AAEA,SAAO,IAAP,EACA;AACI,QAAIF,SAAS,KAAKG,SAAlB,EACA;AACI,aAAO,IAAP;AACH;;AAED,QAAIH,SAAS,CAACI,QAAV,KAAuB,MAA3B,EACA;AACIF,MAAAA,OAAO,GAAGV,4BAA4B,CAACQ,SAAD,EAAYN,aAAZ,CAAtC;;AAEA,UAAIQ,OAAO,KAAK,IAAhB,EACA;AACI,eAAOA,OAAP;AACH;;AAED;AACH;;AAED,QAAIG,OAAO,GAAGL,SAAS,CAACJ,gBAAV,CAA2B,MAA3B,CAAd;;AAEA,QAAIS,OAAO,CAACR,MAAZ,EACA;AACI,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,OAAO,CAACR,MAA5B,EAAoCS,CAAC,EAArC,EACA;AACIJ,QAAAA,OAAO,GAAGV,4BAA4B,CAACa,OAAO,CAACC,CAAD,CAAR,EAAaZ,aAAb,CAAtC;;AAEA,YAAIQ,OAAO,KAAK,IAAhB,EACA;AACI,iBAAOA,OAAP;AACH;AACJ;;AAED;AACH;;AAED,QAAI,CAACF,SAAS,CAACC,aAAf,EACA;AACI;AACH;;AAEDD,IAAAA,SAAS,GAAGA,SAAS,CAACC,aAAtB;AACH;;AAED,SAAO,IAAP;AACH;AAED;;;;;;;;;;;AASA,SAASM,8BAAT,CAAwCC,mBAAxC,EAA6DC,iBAA7D,EACA;AACI,MAAKD,mBAAmB,KAAK,IAAzB,IAAmCA,mBAAmB,KAAKL,SAA/D,EACA;AACI;AACH;;AAED,MAAIO,UAAU,GAAG,IAAjB;;AAEA,OAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGG,iBAAiB,CAACZ,MAAtC,EAA8CS,CAAC,EAA/C,EACA;AACI,QAAIK,QAAQ,GAAGF,iBAAiB,CAACH,CAAD,CAAhC;AAEAI,IAAAA,UAAU,GAAGZ,+CAA+C,CAACU,mBAAD,EAAsBG,QAAtB,CAA5D;;AAEA,QAAID,UAAU,KAAK,IAAnB,EACA;AACI;AACH;AACJ;;AAED,MAAIA,UAAU,KAAK,IAAnB,EACA;AACI;AACH;;AAEDA,EAAAA,UAAU,CAACT,aAAX,CAAyBW,WAAzB,CAAqCJ,mBAArC;AACH","sourcesContent":["/**\n *  @package   AkeebaSocialLogin\n *  @copyright Copyright (c)2016-2020 Nicholas K. Dionysopoulos / Akeeba Ltd\n *  @license   GNU General Public License version 3, or later\n */\n\n/**\n * Finds the first field matching a selector inside a form\n *\n * @param   {HTMLFormElement}  elForm         The FORM element\n * @param   {String}           fieldSelector  The CSS selector to locate the field\n *\n * @returns {Element|null}  NULL when no element is found\n */\nfunction akeeba_sociallogin_findField(elForm, fieldSelector)\n{\n    let elInputs = elForm.querySelectorAll(fieldSelector);\n\n    if (!elInputs.length)\n    {\n        return null;\n    }\n\n    return elInputs[0];\n}\n\n/**\n * Walks the DOM outwards (towards the parents) to find the form innerElement is located in. Then it looks inside the\n * form for the first element that matches the fieldSelector CSS selector.\n *\n * @param   {Element}  innerElement   The innerElement that's inside or adjacent to the form.\n * @param   {String}   fieldSelector  The CSS selector to locate the field\n *\n * @returns {null|Element}  NULL when no element is found\n */\nfunction akeeba_sociallogin_lookInParentElementsForField(innerElement, fieldSelector)\n{\n    var elElement = innerElement.parentElement;\n    var elInput   = null;\n\n    while (true)\n    {\n        if (elElement === undefined)\n        {\n            return null;\n        }\n\n        if (elElement.nodeName === \"FORM\")\n        {\n            elInput = akeeba_sociallogin_findField(elElement, fieldSelector);\n\n            if (elInput !== null)\n            {\n                return elInput;\n            }\n\n            break;\n        }\n\n        var elForms = elElement.querySelectorAll(\"form\");\n\n        if (elForms.length)\n        {\n            for (var i = 0; i < elForms.length; i++)\n            {\n                elInput = akeeba_sociallogin_findField(elForms[i], fieldSelector);\n\n                if (elInput !== null)\n                {\n                    return elInput;\n                }\n            }\n\n            break;\n        }\n\n        if (!elElement.parentElement)\n        {\n            break;\n        }\n\n        elElement = elElement.parentElement;\n    }\n\n    return null;\n}\n\n/**\n * Moves the social login button next to the existing Login button in the login module, if possible. This is not a\n * guaranteed success! We will *try* to find a button that looks like the login action button. If the developer of the\n * module or the site integrator doing template overrides didn't bother including some useful information to help us\n * identify it we're probably going to fail hard.\n *\n * @param   {Element}  elSocialLoginButton  The login button to move.\n * @param   {Array}    possibleSelectors          The CSS selectors to use for moving the button.\n */\nfunction akeeba_sociallogin_move_button(elSocialLoginButton, possibleSelectors)\n{\n    if ((elSocialLoginButton === null) || (elSocialLoginButton === undefined))\n    {\n        return;\n    }\n\n    var elLoginBtn = null;\n\n    for (var i = 0; i < possibleSelectors.length; i++)\n    {\n        var selector = possibleSelectors[i];\n\n        elLoginBtn = akeeba_sociallogin_lookInParentElementsForField(elSocialLoginButton, selector);\n\n        if (elLoginBtn !== null)\n        {\n            break;\n        }\n    }\n\n    if (elLoginBtn === null)\n    {\n        return;\n    }\n\n    elLoginBtn.parentElement.appendChild(elSocialLoginButton);\n}"],"file":"buttons.js"}